{"version":3,"sources":["hooks/useMovies.js","hooks/useLikedMovies.js","components/Logo/index.js","components/SiteMenuItem/index.js","components/SiteMenu/index.js","components/PageHeader/index.js","components/MovieListItem/index.js","components/MovieList/index.js","components/TextBody/index.js","pages/Home.js","pages/Liked.js","pages/NotFound.js","App.js","index.js"],"names":["useMovies","useState","error","setError","isLoaded","setIsLoaded","isLoadingMore","setIsLoadingMore","downloadStats","setDownloadStats","downloadedMovies","setDownloadedMovies","loadMoreMovies","pageToLoad","last_downloaded_page","total_pages","page","pageToGet","Number","isInteger","axios","get","params","getMoviesByPage","then","response","data","results","stats","concat","catch","loadError","useEffect","useLikedMovies","localStorageLikedMovies","JSON","parse","localStorage","getItem","Array","isArray","getLikedMovies","likedMovies","setLikedMovies","setItem","stringify","saveLikedMovies","id","indexOf","filteredLikedMovies","filter","likedId","Logo","className","SiteMenuItem","props","label","url","exactMatch","useRouteMatch","path","exact","to","SiteMenu","items","map","item","PageHeader","title","length","MovieListItem","movieID","movie","isLiked","style","backgroundImage","poster_path","backgroundSize","onClick","removeLikedMovie","addLikedMovie","MovieList","movies","loadMore","content","itemsToRender","TextBody","margin","color","children","Home","popularMovies","loaded","liked","add","rem","Liked","moviesToRender","activateLoadMore","NotFound","App","movieError","moviesLoaded","likedPopularMovies","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d8e94e32.chunk.js","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction useMovies(){\r\n  const [ error, setError ] = useState(null);\r\n  const [ isLoaded, setIsLoaded ] = useState(false);\r\n  const [ isLoadingMore, setIsLoadingMore ] = useState(false);\r\n  const [ downloadStats, setDownloadStats ] = useState(null);\r\n  const [ downloadedMovies, setDownloadedMovies ] = useState([]);\r\n\r\n  useEffect( loadMoreMovies, []);\r\n\r\n  function resetMovies(){\r\n    setError(null);\r\n    setIsLoaded(false);\r\n    setIsLoadingMore(false);\r\n    setDownloadStats(null);\r\n    setDownloadedMovies([]);\r\n  }\r\n\r\n  function loadMoreMovies(){\r\n    if(isLoadingMore) return;\r\n    if(error) resetMovies();\r\n\r\n    let pageToLoad = isLoaded ? downloadStats.last_downloaded_page + 1 : 1;\r\n    if( downloadStats && downloadStats.total_pages && pageToLoad > downloadStats.total_pages ) return;\r\n\r\n    setIsLoadingMore(true);\r\n\r\n    getMoviesByPage( pageToLoad )\r\n      .then( response => {\r\n        const { page, results, ...stats } = response.data;\r\n        setDownloadStats({ ...stats, last_downloaded_page: page });\r\n        setDownloadedMovies([].concat( downloadedMovies, results ));\r\n        setIsLoadingMore(false);\r\n        if(!isLoaded) setIsLoaded(true);\r\n      })\r\n      .catch(loadError =>{\r\n        if(!isLoaded){\r\n          setError(loadError);\r\n          setIsLoaded(true);\r\n        }\r\n\r\n        setIsLoadingMore(false);\r\n      });\r\n  }\r\n\r\n  return (\r\n    downloadStats && downloadStats.last_downloaded_page === downloadStats.total_pages\r\n    ? [ error, isLoaded, downloadedMovies, downloadStats ]\r\n    : [ error, isLoaded, downloadedMovies, downloadStats, loadMoreMovies ]\r\n  );\r\n}\r\n\r\nfunction getMoviesByPage( page = 1 ){\r\n  const pageToGet = Number.isInteger( page ) ? page : 1;\r\n  return axios.get( '/api/popular-movies', {\r\n    params: { page: pageToGet }\r\n  });\r\n}\r\n\r\nexport default useMovies;","import { useState, useEffect } from 'react';\r\n\r\nfunction useLikedMovies(){\r\n  const [ likedMovies, setLikedMovies ] = useState( getLikedMovies() );\r\n\r\n  useEffect( ()=>{\r\n    saveLikedMovies( likedMovies );\r\n  }, [ likedMovies ]);\r\n\r\n  function addLikedMovie( id ){\r\n    if( likedMovies.indexOf(id) !== -1 ) return;\r\n\r\n    setLikedMovies( [].concat( likedMovies, id ) );\r\n  }\r\n\r\n  function removeLikedMovie( id ){\r\n    const idIndex = likedMovies.indexOf(id);\r\n    if( idIndex === -1 ) return;\r\n\r\n    const filteredLikedMovies = likedMovies.filter( likedId => likedId != id );\r\n    setLikedMovies( filteredLikedMovies );\r\n  }\r\n\r\n  return [ likedMovies, addLikedMovie, removeLikedMovie ];\r\n}\r\n\r\nfunction getLikedMovies(){\r\n  let localStorageLikedMovies;\r\n\r\n  try {\r\n    localStorageLikedMovies = JSON.parse( localStorage.getItem('likedMovies') );\r\n  }\r\n\r\n  catch(error){\r\n    localStorageLikedMovies = [];\r\n  }\r\n\r\n  return Array.isArray( localStorageLikedMovies ) ? localStorageLikedMovies : [];\r\n}\r\n\r\nfunction saveLikedMovies( likedMovies ){\r\n  if( ! Array.isArray( likedMovies ) ) return;\r\n  localStorage.setItem( 'likedMovies', JSON.stringify(likedMovies) );\r\n}\r\n\r\nexport default useLikedMovies;","function Logo(){\r\n  return (\r\n    <div className=\"Logo\">\r\n      <span className=\"LogoIcon\">üçø</span>\r\n      <span className=\"LogoWordMark\">popvies</span>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Logo;","import { Link, useRouteMatch } from \"react-router-dom\";\r\n\r\nfunction SiteMenuItem(props){\r\n  const { label, url, exactMatch = false } = props;\r\n  const match = useRouteMatch({ path: url, exact: exactMatch });\r\n  const className = \"SiteMenuItem\" + ( match ? \" active\" : \"\" );\r\n\r\n  return <div className={ className }><Link to={ url }>{ label }</Link></div>\r\n}\r\n\r\nexport default SiteMenuItem;","import SiteMenuItem from \"../SiteMenuItem\";\r\n\r\nfunction SiteMenu(props){\r\n  const items = props.items && Array.isArray(props.items)\r\n                ? props.items\r\n                : [];\r\n\r\n  return (\r\n    <div className=\"SiteMenu\">\r\n      { items.map( item => <SiteMenuItem {...item} /> ) }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SiteMenu;","import Logo from '../Logo';\r\nimport SiteMenu from '../SiteMenu';\r\n\r\nfunction PageHeader(props){\r\n  const { title, likedMovies } = props;\r\n  return (\r\n    <div className=\"PageHeader\">\r\n      <Logo />\r\n      <SiteMenu items={ [{ label: 'home', url: '/', exactMatch: true }, { label: `liked (${likedMovies.length})`, url: '/liked' }] } />\r\n      <div className=\"PageHeaderTitle\">{ title || \"untitled page\" }</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PageHeader;","function MovieListItem(props){\r\n  const movieID = props.movie.id;\r\n  const isLiked = props.likedMovies.indexOf( movieID ) > -1;\r\n\r\n  return (\r\n    <div\r\n      className={ `movie${ isLiked ? ' liked': '' }` }\r\n      style={{\r\n        backgroundImage: `url(https://image.tmdb.org/t/p/original${props.movie.poster_path})`,\r\n        backgroundSize: 'cover'\r\n      }}\r\n      onClick={ ()=>{\r\n        isLiked ? props.removeLikedMovie( movieID ) : props.addLikedMovie( movieID )\r\n      } }\r\n    >\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MovieListItem;","import { useState } from 'react';\r\nimport MovieListItem from '../MovieListItem';\r\n\r\nfunction MovieList(props){\r\n  const { movies, loadMore, ...likedMovies } = props;\r\n  const content = movies.length > 0\r\n                  ? movies.map( movie => <MovieListItem movie={movie} {...likedMovies}></MovieListItem> )\r\n                  : <div>No Movies Found</div>;\r\n\r\n  let itemsToRender = [].concat( content );\r\n\r\n  if(loadMore && typeof loadMore === 'function'){\r\n    itemsToRender = itemsToRender.concat(\r\n      <div className=\"loadMore\" onClick={loadMore}>Load More Movies</div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"MovieList\">{ itemsToRender }</div>\r\n  );\r\n}\r\n\r\nexport default MovieList;","function TextBody(props){\r\n  return (\r\n    <div style={{ margin: '0 5vw', color: '#cdc' }}>\r\n      { props.children }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TextBody;","import PageHeader from '../components/PageHeader';\r\nimport MovieList from '../components/MovieList';\r\nimport TextBody from '../components/TextBody';\r\n\r\nfunction Home(props){\r\n  const { popularMovies, likedMovies } = props;\r\n  let content;\r\n\r\n  if( popularMovies.error ) content = <TextBody>Experienced error while loading popular movies :(</TextBody>;\r\n  else if( ! popularMovies.loaded ) content = <TextBody>Loading popular movies ...</TextBody>;\r\n  else content = (\r\n    <MovieList\r\n      movies={popularMovies.movies}\r\n      loadMore={popularMovies.loadMore}\r\n      likedMovies={likedMovies.liked}\r\n      addLikedMovie={likedMovies.add}\r\n      removeLikedMovie={likedMovies.rem}\r\n     />\r\n  );\r\n\r\n  return ([\r\n    <PageHeader title=\"Popular Movies\" likedMovies={likedMovies.liked}></PageHeader>,\r\n    content\r\n  ]);\r\n}\r\n\r\nexport default Home;","import PageHeader from '../components/PageHeader';\r\nimport MovieList from '../components/MovieList';\r\nimport TextBody from '../components/TextBody';\r\n\r\nfunction Liked(props){\r\n  const { popularMovies, likedMovies } = props;\r\n  let content;\r\n\r\n  if( popularMovies.error ) content = <TextBody>Experienced error while loading liked movies :(</TextBody>;\r\n  else if( ! popularMovies.loaded ) content = <TextBody>Loading liked movies ...</TextBody>;\r\n  else {\r\n    const moviesToRender = popularMovies.movies.filter( movie => likedMovies.liked.indexOf( movie.id ) > -1 );\r\n    const activateLoadMore = moviesToRender.length < likedMovies.liked.length;\r\n\r\n    content = (\r\n      <MovieList\r\n        movies={moviesToRender}\r\n        loadMore={ activateLoadMore ? popularMovies.loadMore : null }\r\n        likedMovies={likedMovies.liked}\r\n        addLikedMovie={likedMovies.add}\r\n        removeLikedMovie={likedMovies.rem}\r\n      />\r\n    );\r\n  }\r\n\r\n  return ([\r\n    <PageHeader title=\"Movies You Liked\" likedMovies={likedMovies.liked}></PageHeader>,\r\n    content\r\n  ]);\r\n}\r\n\r\nexport default Liked;","import PageHeader from '../components/PageHeader';\r\nimport TextBody from '../components/TextBody';\r\n\r\nfunction NotFound(props){\r\n  const { likedMovies } = props;\r\n  return ([\r\n    <PageHeader title=\"Page Not Found\" likedMovies={likedMovies.liked} />,\r\n    <TextBody>Sorry, unable to load this page.</TextBody>\r\n  ]);\r\n}\r\n\r\nexport default NotFound;","import { BrowserRouter, Switch, Route } from 'react-router-dom';\nimport useMovies from './hooks/useMovies';\nimport useLikedMovies from './hooks/useLikedMovies';\nimport HomePage from './pages/Home.js';\nimport LikedPage from './pages/Liked.js';\nimport NotFoundPage from './pages/NotFound.js';\n\nfunction App() {\n  const [ movieError, moviesLoaded, movies, downloadStats, loadMoreMovies ] = useMovies();\n  const [ likedMovies, addLikedMovie, removeLikedMovie ] = useLikedMovies();\n\n  const popularMovies = { loaded: moviesLoaded, error: movieError, movies: movies, stats: downloadStats, loadMore: loadMoreMovies };\n  const likedPopularMovies = { liked: likedMovies, add: addLikedMovie, rem: removeLikedMovie };\n\n  return (\n    <BrowserRouter>\n      <div className='App'>\n        <Switch>\n          <Route exact path='/'><HomePage popularMovies={popularMovies} likedMovies={likedPopularMovies} /></Route>\n          <Route path='/liked'><LikedPage popularMovies={popularMovies} likedMovies={likedPopularMovies} /></Route>\n          <Route path='*'><NotFoundPage likedMovies={likedPopularMovies} /></Route>\n        </Switch>\n      </div>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}