(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{34:function(e,t,i){},58:function(e,t,i){"use strict";i.r(t);var a=i(0),r=i.n(a),o=i(27),c=i.n(o),n=(i(34),i(8)),s=i(12),l=i(2),d=i(9),j=i(13),v=i(28),u=i.n(v);var b=function(){var e=Object(a.useState)(null),t=Object(n.a)(e,2),i=t[0],r=t[1],o=Object(a.useState)(!1),c=Object(n.a)(o,2),s=c[0],l=c[1],v=Object(a.useState)(!1),b=Object(n.a)(v,2),O=b[0],p=b[1],m=Object(a.useState)(null),f=Object(n.a)(m,2),h=f[0],x=f[1],M=Object(a.useState)([]),k=Object(n.a)(M,2),g=k[0],N=k[1];function S(){if(!O){i&&(r(null),l(!1),p(!1),x(null),N([]));var e=s?h.last_downloaded_page+1:1;h&&h.total_pages&&e>h.total_pages||(p(!0),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=Number.isInteger(e)?e:1;return u.a.get("/api/popular-movies",{params:{page:t}})}(e).then((function(e){var t=e.data,i=t.page,a=t.results,r=Object(j.a)(t,["page","results"]);x(Object(d.a)(Object(d.a)({},r),{},{last_downloaded_page:i})),N([].concat(g,a)),p(!1),s||l(!0)})).catch((function(e){s||(r(e),l(!0)),p(!1)})))}}return Object(a.useEffect)(S,[]),h&&h.last_downloaded_page===h.total_pages?[i,s,g,h]:[i,s,g,h,S]};var O=function(){var e=Object(a.useState)(function(){var e;try{e=JSON.parse(localStorage.getItem("likedMovies"))}catch(t){e=[]}return Array.isArray(e)?e:[]}()),t=Object(n.a)(e,2),i=t[0],r=t[1];return Object(a.useEffect)((function(){!function(e){if(!Array.isArray(e))return;localStorage.setItem("likedMovies",JSON.stringify(e))}(i)}),[i]),[i,function(e){-1===i.indexOf(e)&&r([].concat(i,e))},function(e){if(-1!==i.indexOf(e)){var t=i.filter((function(t){return t!=e}));r(t)}}]},p=i(1);var m=function(){return Object(p.jsxs)("div",{className:"Logo",children:[Object(p.jsx)("span",{className:"LogoIcon",children:"\ud83c\udf7f"}),Object(p.jsx)("span",{className:"LogoWordMark",children:"popvies"})]})};var f=function(e){var t=e.label,i=e.url,a=e.exactMatch,r=void 0!==a&&a,o="SiteMenuItem"+(Object(l.f)({path:i,exact:r})?" active":"");return Object(p.jsx)("div",{className:o,children:Object(p.jsx)(s.b,{to:i,children:t})})};var h=function(e){var t=e.items&&Array.isArray(e.items)?e.items:[];return Object(p.jsx)("div",{className:"SiteMenu",children:t.map((function(e){return Object(p.jsx)(f,Object(d.a)({},e))}))})};var x=function(e){var t=e.title,i=e.likedMovies;return Object(p.jsxs)("div",{className:"PageHeader",children:[Object(p.jsx)(m,{}),Object(p.jsx)(h,{items:[{label:"home",url:"/",exactMatch:!0},{label:"liked (".concat(i.length,")"),url:"/liked"}]}),Object(p.jsx)("div",{className:"PageHeaderTitle",children:t||"untitled page"})]})};var M=function(e){var t=e.movie.id,i=e.likedMovies.indexOf(t)>-1;return Object(p.jsx)("div",{className:"movie".concat(i?" liked":""),style:{backgroundImage:"url(https://image.tmdb.org/t/p/original".concat(e.movie.poster_path,")"),backgroundSize:"cover"},onClick:function(){i?e.removeLikedMovie(t):e.addLikedMovie(t)}})};var k=function(e){var t=e.movies,i=e.loadMore,a=Object(j.a)(e,["movies","loadMore"]),r=t.length>0?t.map((function(e){return Object(p.jsx)(M,Object(d.a)({movie:e},a))})):Object(p.jsx)("div",{children:"No Movies Found"}),o=[].concat(r);return i&&"function"===typeof i&&(o=o.concat(Object(p.jsx)("div",{className:"loadMore",onClick:i,children:"Load More Movies"}))),Object(p.jsx)("div",{className:"MovieList",children:o})};var g=function(e){return Object(p.jsx)("div",{style:{margin:"0 5vw",color:"#cdc"},children:e.children})};var N=function(e){var t,i=e.popularMovies,a=e.likedMovies;return t=i.error?Object(p.jsx)(g,{children:"Experienced error while loading popular movies :("}):i.loaded?Object(p.jsx)(k,{movies:i.movies,loadMore:i.loadMore,likedMovies:a.liked,addLikedMovie:a.add,removeLikedMovie:a.rem}):Object(p.jsx)(g,{children:"Loading popular movies ..."}),[Object(p.jsx)(x,{title:"Popular Movies",likedMovies:a.liked}),t]};var S=function(e){var t,i=e.popularMovies,a=e.likedMovies;if(i.error)t=Object(p.jsx)(g,{children:"Experienced error while loading liked movies :("});else if(i.loaded){var r=i.movies.filter((function(e){return a.liked.indexOf(e.id)>-1})),o=r.length<a.liked.length;t=Object(p.jsx)(k,{movies:r,loadMore:o?i.loadMore:null,likedMovies:a.liked,addLikedMovie:a.add,removeLikedMovie:a.rem})}else t=Object(p.jsx)(g,{children:"Loading liked movies ..."});return[Object(p.jsx)(x,{title:"Movies You Liked",likedMovies:a.liked}),t]};var L=function(e){var t=e.likedMovies;return[Object(p.jsx)(x,{title:"Page Not Found",likedMovies:t.liked}),Object(p.jsx)(g,{children:"Sorry, unable to load this page."})]};var y=function(){var e=b(),t=Object(n.a)(e,5),i=t[0],a=t[1],r=t[2],o=t[3],c=t[4],d=O(),j=Object(n.a)(d,3),v={loaded:a,error:i,movies:r,stats:o,loadMore:c},u={liked:j[0],add:j[1],rem:j[2]};return Object(p.jsx)(s.a,{children:Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)(l.c,{children:[Object(p.jsx)(l.a,{exact:!0,path:"/",children:Object(p.jsx)(N,{popularMovies:v,likedMovies:u})}),Object(p.jsx)(l.a,{path:"/liked",children:Object(p.jsx)(S,{popularMovies:v,likedMovies:u})}),Object(p.jsx)(l.a,{path:"*",children:Object(p.jsx)(L,{likedMovies:u})})]})})})};c.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(y,{})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.d8e94e32.chunk.js.map